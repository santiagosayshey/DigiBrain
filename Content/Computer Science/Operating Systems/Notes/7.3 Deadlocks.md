> [!example] Dining Lawyers Problem
> Five lawyers sit around a circular table, each with a plate of spaghetti and a single fork between each pair of lawyers. To eat, a lawyer needs two forks.
> 
> ![[Pasted image 20240910050914.png|400]]
> 
> The problem unfolds as follows:
> 1. Each lawyer follows this routine:
>    - Think (don't need forks)
>    - Pick up left fork
>    - Pick up right fork
>    - Eat
>    - Put down right fork
>    - Put down left fork
> 
> 2. Deadlock scenario:
>    - If all lawyers simultaneously pick up their left forks, none can pick up their right forks.
>    - All lawyers are now holding one fork and waiting for another, creating a circular wait.
> 
> 3. This demonstrates all four conditions for deadlock:
>    - **Mutual Exclusion**: Only one lawyer can use a fork at a time.
>    - **Hold and Wait**: Lawyers hold one resource (left fork) while waiting for another (right fork).
>    - **No Preemption**: Forks cannot be forcibly taken from lawyers.
>    - **Circular Wait**: Each lawyer is waiting for the fork held by the next lawyer.
> 
> Possible solutions:
> - Allow only four lawyers to sit at the table at once.
> - Instruct an odd-numbered lawyer to pick up the right fork first, then the left.
> - Use a semaphore to limit the number of lawyers who can simultaneously attempt to pick up forks.

> [!idea] Deadlock
> A deadlock is a concurrent systems problem where **two or more processes are unable to proceed because each is waiting for the other to release a resource.**
> 
> Key characteristics of a deadlock:
> - **Mutual Exclusion**: At least one resource must be held in a non-sharable mode.
> - **Hold and Wait**: A process must be holding at least one resource while waiting to acquire additional resources held by other processes.
> - **No Preemption**: Resources cannot be forcibly taken away; they must be released voluntarily by the process holding them.
> - **Circular Wait**: A circular chain of two or more processes, each waiting for a resource held by the next process in the chain.

> [!consider] Factorio Trains Deadlock
> Consider our Factorio railway system from before. If we add 1 more train to the network, we experience a deadlock. Each train is trying to move to a station that is mutually blocked by another train. A train in the top left is trying to get to the bottom right, but cant because a train is there. That train is trying to get to the bottom left, because there is a train there also!
> 
> ![[Pasted image 20240910050428.png]]
> 
> 
> This scenario mirrors the deadlock conditions:
> 1. **Mutual Exclusion**: Each track segment can only be used by one train at a time.
> 2. **Hold and Wait**: Each train holds one track while waiting for the other.
> 3. **No Preemption**: Trains can't be forcibly removed from tracks.
> 4. **Circular Wait**: Train A-B is waiting for Train C-D, which is waiting for Train A-B.
