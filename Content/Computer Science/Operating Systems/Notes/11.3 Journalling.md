> [!idea] Journaling File Systems
> Journaling solves FSCK's performance issues by maintaining a log (journal) of file system changes before applying them. This log acts as a record of pending changes, enabling quick recovery after crashes.
> 
> **Journal Structure**:
> 
> | Component | Purpose | Contents |
> |-----------|---------|-----------|
> | Transaction Begin | Marks start | Transaction ID, timestamp |
> | Transaction Data | Changes to make | Blocks to write, metadata updates |
> | Transaction End | Marks completion | Checksum, completion flag |
> 
> **Types of Journaling**:
> 1. **Metadata Journaling**:
>    - Only logs metadata changes (inodes, directories)
>    - Faster but less protection for file data
>    - Example: Default mode in ext3
> 
> 2. **Full Journaling**:
>    - Logs both metadata and file data
>    - Complete protection but higher overhead
>    - Used when data consistency crucial

> [!example] Journaling in Action
> Consider creating file '/home/user/example.txt':
> 
> ```
> 1. Begin Transaction #1274
>    - Allocate inode 567
>    - Update directory '/home/user'
>    - Allocate data blocks [100,101]
>    
> 2. Write to Journal:
>    [TXN_START][inode_567][dir_update][block_alloc][TXN_END]
>    
> 3. Wait for Journal Write to Complete
> 
> 4. Apply Changes to File System:
>    - Write actual file data
>    - Update real metadata
>    
> 5. Mark Transaction Complete
> ```
> 
> If crash occurs:
> - Before step 3: No changes made, no recovery needed
> - During step 4: Replay journal entries
> - After step 5: Changes complete, journal entry discarded
