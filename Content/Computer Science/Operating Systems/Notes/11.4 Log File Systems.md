> [!motivation] Beyond Traditional File Systems
> Modern storage systems face challenges that make FFS-style designs less optimal:
> 
> **Technology Shifts**:
> - RAM sizes increased dramatically (MB â†’ GB)
> - Large RAM caches make read performance less critical
> - Write performance becomes the bottleneck
> - SSDs change access pattern assumptions
> 
> **FFS Limitations**:
> - Random writes require multiple disk accesses:
>   - Update data blocks
>   - Modify inode
>   - Update bitmaps
>   - Write journal entries
> - Each write operation causes disk head movement
> - Write amplification impacts SSD lifetime
> 
> These factors led to rethinking file system design, focusing on sequential writes and write optimization rather than read optimization.

> [!idea] Log-Structured File System (LFS)
> LFS treats the disk as a continuous log, writing all changes sequentially. This radical redesign optimizes for write performance:
> 
> **Core Architecture**:
> - Disk viewed as single append-only log
> - All writes become sequential
> - No in-place updates
> 
> **Sequential Writing**:
> 
> | Component | Traditional FS | LFS Approach |
> |-----------|---------------|--------------|
> | Data Blocks | Random placement | Append to log |
> | Metadata | Fixed locations | Written with data |
> | Free Space | Bitmap tracked | Threading between segments |
> 
> **Data Structures**:
> - **Inode Files**: Collections of inodes written to log
> - **Imap**: Maps inode numbers to log locations
> - **Segment Usage Table**: Tracks live data in segments
> 
> ```
> Log Structure:
> [Segment N][Segment N+1][Segment N+2]...
> Each Segment:
> [Data Blocks][Inodes][Imap Pieces][Segment Summary]
> ```

Would you like me to continue with the example and consider callouts?