
> [!consider] Approaches to CPU Virtualization
> Operating systems use different strategies to virtualize the CPU:
> 
> 1. **Direct Execution**:
>    - OS creates process and transfers control to starting point (e.g., main())
>    - Allows user process to run directly on hardware
>    - Problems:
>      - No restrictions (could access files, read/write other process data)
>      - Process could run forever (if slow, buggy, or malicious)
>      - No way to handle slow operations (like I/O)
> 
> 2. **Limited Direct Execution**:
>    - A technique that allows processes to run directly on the CPU while maintaining OS control
>    - Introduces two CPU modes:
>      - **User mode**: For running application code with **restricted privileges**
>      - **Kernel mode**: For executing **privileged operations** and OS code
>    - Uses hardware support (e.g., protection modes, timer interrupts)
>    - Enables system calls for restricted operations (file access, I/O)
>    - Allows OS to regain control periodically and manage processes
> 
> These approaches balance efficient execution with necessary OS control, forming the basis for modern process management.


> [!idea] The Kernel: Core OS Manager
> The kernel is the **central, privileged part of an operating system that manages and provides essential services.**
> 
> How it operates:
> 1. System starts in kernel mode
> 2. Kernel initializes hardware and core services
> 3. User process created, switches to user mode
> 4. When **process needs privileged operation** (e.g., I/O, memory allocation):
>    - Process makes system call
>    - **CPU switches to kernel mode**
>    - Kernel performs requested operation
>    - CPU returns to user mode, process continues
> 5. Kernel handles interrupts, switching to kernel mode as needed
> 
> ![[OS Mode Switching 1.png|700]]

