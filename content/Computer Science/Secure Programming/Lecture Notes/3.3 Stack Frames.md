
> [!idea] Stack and Function Calls
> Stacks are **first in, last out** data structures used to manage function calls. When a function is called, a new **stack frame** is created on the stack. This frame stores important information such as the function's local variables, parameters, and the return address (stored in EIP) for when the function completes.
>
> ### Example Stack Frame:
>
> | Register       | Stack Content                       | Description                                      |
> |----------------|-------------------------------------|--------------------------------------------------|
> |                | **[Bottom of Stack]**               | The initial values in the current function's stack frame (higher memory address). |
> |                | Parameter 2                         | The second parameter passed to the current function. |
> |                | Parameter 1                         | The first parameter passed to the current function. |
> | EBP →          | Saved Base Pointer                  | The previous function's base pointer, saved to restore the caller's stack frame. |
> | EIP →          | Return address                      | The address to return to after the function ends. |
> |                | Local variable 1                    | The first local variable of the current function.|
> | ESP →          | Local variable 2                    | The second local variable of the current function (lowest memory address). |
> |                | **[Top of Stack]**                  | The most recently pushed value (lowest memory address). |
>
> - **ESP (Stack Pointer)**: Points to the top of the stack, which is the lowest memory address, where the most recent data (like local variables) is stored.
> - **EBP (Base Pointer)**: Points to the saved base pointer, which is higher up in the stack, marking the start of the current function's stack frame.
> - **EIP (Instruction Pointer)**: Points to the return address, which is the address in the caller function that should be executed once the current function returns.
>
> As new functions are called, stack frames grow downwards in memory, with each new frame positioned below the previous one. The stack operates primarily through two operations:
> - **push**: Decreases the stack pointer (ESP) and stores a value at the new ESP location, effectively adding data to the top of the stack.
> - **pop**: Retrieves the value at the current ESP and then increases ESP, removing data from the top of the stack.

```
push $eax // draw the stack
pop $eax // draw the stack again and show the register
```