
> [!idea]+ Idea
> We already found a selection algorithm in [[4.1 Randomised Selection Algorithm|RSelect]] that can sort on average in $O(n)$ time, why bother with anything else? Because DSelect is fucking cool, that's why. Ok but really, DSelect provides an at worst $O(n)$ running time by carefully selecting the pivot, rather than at random.


> [!consider] Guaranteeing a Good Pivot
> 
> Use the **Median of Medians**



> [!code] Code
> ```c
ChoosePivot(array A, length n) {
    if n <= 5 {
        sort(A, n); // Assume this sorts the array A of size n
        return A[n / 2]; // Return the median of A
    }

    // For simplicity, assume n is divisible by 5
    array C[n / 5]; // Create an array to store medians
    for (int i = 0; i < n / 5; i++) {
        sort(A + i * 5, 5); // Sort each group of 5 elements
        C[i] = A[i * 5 + 2]; // Pick the median and store it in C
    }

    // Recursively find the median of the medians
    return ChoosePivot(C, n / 5);
}
```


