> [!consider] The Need for Pipelining in Reliable Data Transfer Protocols
>
> In high-speed networks with significant propagation delays and small packet sizes, **stop-and-wait protocols can severely limit bandwidth utilization**. For example, with a 1 Gbps link, 15 ms end-to-end propagation delay, and 1 KB packet size, the sender utilization is only 0.027%, resulting in a throughput of just 33 KB/sec.
>
> **Pipelining addresses this issue** by allowing multiple data packets to be in transit simultaneously, without waiting for individual ACKs. By using sequence numbers, timers, and efficient retransmission mechanisms, pipelining enables the sender to fully utilize the available bandwidth and significantly improve throughput.
>
> Pipelining has the following consequences for reliable data transfer protocols:
> - Increased range of sequence numbers to accommodate multiple in-transit packets
> - Buffering requirements for both sender and receiver
> - Dependence on the protocol's approach to handling lost, corrupted, or delayed packets (e.g., Go-Back-N or selective repeat)
>
> [[Pipelining]] is crucial in advanced RDT protocols to overcome the limitations of stop-and-wait approaches and ensure efficient data transfer in high-speed networks with substantial propagation delays.

> [!idea] Go-Back-N (GBN)
> 
> Go-Back-N is a pipelining protocol where the sender can transmit multiple packets (up to a window size) without waiting for an acknowledgment, but the receiver only sends cumulative acknowledgments. If a packet is lost or corrupted, the receiver discards all subsequent packets, even if they are received correctly, until the missing packet is retransmitted.
>
> - The sender maintains a window of size N, which limits the number of unacknowledged packets that can be in transit.
> - The receiver keeps track of the sequence number of the next expected packet and sends cumulative ACKs for in-order packets.
> - If a packet is lost or corrupted, the receiver sends an ACK for the last correctly received packet, prompting the sender to retransmit all packets starting from the lost one.
> - The window slides forward only when the oldest unacknowledged packet is acknowledged.

> [!consider] Selective Repeat (SR)
>
> Selective Repeat is a pipelining protocol that allows the sender to transmit multiple packets (up to a window size) without waiting for an acknowledgment, and the receiver individually acknowledges each correctly received packet, even if it is out of order.
>
> - The sender maintains a window of size N, which limits the number of unacknowledged packets that can be in transit.
> - The receiver keeps track of the sequence numbers of correctly received packets and sends individual ACKs for each one.
> - If a packet is lost or corrupted, the receiver sends a negative acknowledgment (NAK) for that specific packet, prompting the sender to retransmit only that packet.
> - The sender maintains a timer for each transmitted packet and retransmits the packet if no ACK is received before the timer expires.
> - The window slides forward whenever an ACK is received, potentially allowing new packets to be sent.

> [!consider] Window Size
>
> The window size is a critical parameter in both Go-Back-N and Selective Repeat protocols, as it determines the maximum number of unacknowledged packets that can be in transit at any given time.
>
> - The window size should be large enough to fully utilize the available bandwidth and minimize the impact of propagation delays.
> - However, if the window size is too large, it can lead to increased memory requirements for buffering packets and potentially cause network congestion.
> - The optimal window size depends on factors such as the bandwidth-delay product (BDP) of the network, which is the product of the available bandwidth and the round-trip propagation delay.
> - In practice, the window size is often dynamically adjusted based on network conditions and the receiver's available buffer space, using techniques like flow control and congestion control.
