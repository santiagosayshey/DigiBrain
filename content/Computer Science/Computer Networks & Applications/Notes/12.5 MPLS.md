> [!motivation] The Need for Efficient Routing
> In large-scale networks, **traditional IP routing can become complex and inefficient due to the need to process long network addresses at each hop**. Routers perform longest prefix matching to determine the next hop, which can be time-consuming and resource-intensive. This can lead to increased latency and reduced network performance, especially in networks with a high volume of traffic. An optimized routing technique is needed to simplify the routing process and improve overall network efficiency.

> [!idea] MPLS (Multiprotocol Label Switching)
> MPLS is a routing technique that **directs data based on short path labels rather than long network addresses**, improving network packet forwarding speed and efficiency. Labels identify virtual links between distant nodes, allowing for simplified packet routing.
> - Uses labels to determine packet routes, which is faster than longest prefix matching
> - **MPLS is added to the datagram between layer 2 and layer 3,** allowing the IP header to be retained while MPLS includes its own label information for efficient routing.
>   - MPLS header contains:
>     - 20-bit label value
>     - 3-bit Traffic Class field for QoS priority
>     - 1-bit bottom of stack flag
>     - 8-bit TTL (Time to Live) field
> - Improves network performance and simplifies the routing process

> [!consider] MPLS Components
> MPLS networks consist of Label Switch Routers (LSRs) that perform label switching and Label Edge Routers (LERs) at the network edge that assign and remove labels. 
> 
> | Component | Role |
> |-----------|------|
> | LSR | Forward packets to outgoing interfaces based **only** on label value |
> | LER | Assigns and removes labels and forwards packets to LSRs |



> [!example] MPLS in Action
> Consider a packet traveling from Host A to Host B through an MPLS network:
> 1. Host A sends a packet to the ingress router (Ingress LER).
> 2. The Ingress LER assigns an MPLS label to the packet based on its destination and forwards it to the next LSR along the Label Switched Path (LSP).
> 3. Each LSR on the LSP uses the label to determine the next hop and performs a label swap, replacing the incoming label with the outgoing label.
> 4. The packet reaches the egress router (Egress LER), which removes the label and forwards the packet to Host B.


> [!consider] MPLS Benefits and Use Cases
> MPLS enables Quality of Service (QoS) for prioritizing critical traffic and supports Virtual Private Networks (VPNs) for secure, isolated network communication. It also facilitates network traffic engineering for optimizing resource utilization and performance.
> - Commonly used in:
>   - Large-scale enterprise networks
>   - Service provider networks

