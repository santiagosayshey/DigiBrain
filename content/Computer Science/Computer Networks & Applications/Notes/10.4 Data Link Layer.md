> [!motivation] Motivation
> Once the network layer determines the path for packets, the **data link layer is responsible for actually transmitting the data** over the physical medium. However, sending raw bits directly is prone to errors due to noise and interference.
> 
> The data link layer **enables reliable data transfer between directly connected nodes**, acting as a "delivery truck" that carries packets from one node to the next. It ensures that packets are not corrupted during transmission and can detect and possibly correct errors.

> [!idea] Data Link Layer
> The data link layer has two key responsibilities:
> 1. **Reliable delivery between adjacent nodes**: Ensures data is accurately delivered from one node to the next **over the physical link** through:
>    - Framing
>    - Error detection and correction
>    - Flow control
> 2. **Access control for shared media**: Coordinates access to shared physical media (e.g., in a LAN) to avoid collisions using media access control (MAC) protocols.



> [!idea] Frames
> At the data link layer, data is divided into manageable units called frames. A frame is a structured sequence of bits that includes both the data being transmitted and additional information for reliable delivery. The general structure of a frame consists of:
> - **Header**: Contains information such as the source and destination MAC addresses for the current network, the source and destination IP addresses, frame type, and control information.
> - **Payload**: The actual data being transmitted, typically a packet from the network layer.
> - **Trailer**: Includes error detection and correction information, such as a frame check sequence (FCS) for detecting transmission errors.
> 
> The specific format of a frame can vary depending on the data link layer protocol being used (e.g., Ethernet, PPP, HDLC). However, the general purpose of framing remains the same: to provide a structured and reliable means of transmitting data over a physical link.

> [!idea] MAC Addresses
> Media Access Control (MAC) addresses are unique identifiers assigned to network interface cards (NICs) by the manufacturer. They are **used by the data link layer for local delivery of frames within a single network** segment, such as a LAN. Key points about MAC addresses include:
> - **48-bit address**: MAC addresses are 48 bits long and are usually represented in hexadecimal notation (e.g., 00:1A:2B:3C:4D:5E).
> - **Uniqueness**: MAC addresses are globally unique, ensuring that no two devices on a network have the same address.
> - **Local scope**: MAC addresses are used for communication within a single network segment. When a packet traverses multiple networks, the source and destination MAC addresses change at each hop, while the IP addresses remain constant.
> - **Address Resolution Protocol (ARP)**: ARP is used to map IP addresses to MAC addresses within a LAN. When a device needs to send a packet to another device on the same network, it uses ARP to find the corresponding MAC address.
> 
> MAC addressing is a crucial component of the data link layer, enabling reliable and efficient communication between devices on a local network.

> [!example] Sending a Packet Between Two LANs
> Consider a scenario where a packet needs to be sent from a device with IP address 192.168.1.10 in LAN A to a device with IP address 192.168.2.20 in LAN B, connected through a router.
> 1. The source device (192.168.1.10) encapsulates the packet in a frame, setting the destination MAC address to the router's MAC address on LAN A and the source MAC address to its own. The frame header also includes the source and destination IP addresses (source: 192.168.1.10, destination: 192.168.2.20), which remain constant throughout the entire process.
> 2. The frame is **sent over the physical medium in LAN A and reaches the router**.
> 3. The router de-encapsulates the frame, extracting the packet. It then **looks up the destination IP address (192.168.2.20) in its routing table to determine the next hop**.
> 4. The router encapsulates the packet in a new frame, setting the destination MAC address to the next hop's MAC address (either the destination device or another router) on LAN B and the source MAC address to the router's MAC address on LAN B. The IP addresses in the frame header remain unchanged (source: 192.168.1.10, destination: 192.168.2.20).
> 5. The new frame is sent over the physical medium in LAN B, and the process continues until the frame reaches the destination device (192.168.2.20).
> 
> This example shows how the source and destination IP addresses remain constant throughout the entire process, while the MAC addresses change based on the network segment the packet is traversing. The data link layer uses MAC addresses for local delivery within a LAN, while the network layer uses IP addresses for end-to-end delivery across multiple networks.